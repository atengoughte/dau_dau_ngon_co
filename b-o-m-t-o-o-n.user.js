// ==UserScript==
// @name         b-o-m-t-o-o-n
// @namespace    b-o-m-t-o-o-n.user.js
// @version      2025.02.24
// @description  down b-o-m-t-o-o-n
// @author       You
// @include      /^https:\/\/www.b[o0]mt[o0][o0]n.c[o0]m\/vi[e3]w[e3]r\/.+?\/.+/
// @icon         https://raw.githubusercontent.com/atengoughte/dau_dau_ngon_co/main/b-o-m-t-o-o-n.png
// @require      https://cdn.jsdelivr.net/npm/@zip.js/zip.js@2.7.48/dist/zip.min.js
// @grant        none
// @downloadURL  https://github.com/atengoughte/dau_dau_ngon_co/raw/main/b-o-m-t-o-o-n.user.js
// @updateURL    https://github.com/atengoughte/dau_dau_ngon_co/raw/main/b-o-m-t-o-o-n.meta.js
// ==/UserScript==

function a0_0x568d(_0x17354f,_0x503c5f){const _0x259477=a0_0x2594();return a0_0x568d=function(_0x568dea,_0x1df43e){_0x568dea=_0x568dea-0xeb;let _0x4b8f6b=_0x259477[_0x568dea];return _0x4b8f6b;},a0_0x568d(_0x17354f,_0x503c5f);}(function(_0x191215,_0x159cb0){const _0x1db84e=a0_0x568d,_0x4e84a8=_0x191215();while(!![]){try{const _0x2debc8=-parseInt(_0x1db84e(0xf4))/0x1*(parseInt(_0x1db84e(0xee))/0x2)+-parseInt(_0x1db84e(0x130))/0x3*(parseInt(_0x1db84e(0x15e))/0x4)+parseInt(_0x1db84e(0x14d))/0x5*(-parseInt(_0x1db84e(0x119))/0x6)+-parseInt(_0x1db84e(0x13a))/0x7*(-parseInt(_0x1db84e(0xfd))/0x8)+-parseInt(_0x1db84e(0x15f))/0x9*(parseInt(_0x1db84e(0x158))/0xa)+parseInt(_0x1db84e(0x16b))/0xb+parseInt(_0x1db84e(0x11b))/0xc*(parseInt(_0x1db84e(0x12c))/0xd);if(_0x2debc8===_0x159cb0)break;else _0x4e84a8['push'](_0x4e84a8['shift']());}catch(_0x21449b){_0x4e84a8['push'](_0x4e84a8['shift']());}}}(a0_0x2594,0x4458c));function a0_0x2594(){const _0x229ba5=['13793pOBmAm','href','forEach','link','div','padding','1px\x20#C62428','display','3rem','1172504ldcamU','LPT6','LPT3','COM4','.zip','webp','data:image/webp;base64,UklGRvQCAABXRUJQVlA4TOcCAAAvP8APEJfAJADANGNQTJZJrX+QN3gntY0kNfcWbzJE+qL/wqhCkdu2jZN0H/du///IAooiSY0aMWjFFirI8Y6OVAAABD4AJnt4nKllckWBvHfeeYbanLJjqPZRFv8vvtDeHtx7bs1gdHBY20rY9EcNiNra7D9tRIVkgYj+Q5AkN26zwAoLEMrNK0/4mO2MMRwAwvmJIcbz86ydcfQiJSIuJeO2I54PV4izSNEmmUkXnlGjkqXUWouG+hIkj8ID4laJZYxtbRR4CGc1ACxzxVIYIpy+Kk3KIeguepiLUi5Rst0DkijlFpIQjKSbz5gQgo2rNn+XxePM52TcUb3xpLW08RN4mEUycK6bspV1mDEwwrrJ/CeSibKYvEojRHetZijL1RYasIhsZuq9/9LtNjDiFJMYc0K/rv+/g2zNI5yuWATf6xr+hVTLwCIcjvGu8TOnDYfKqZa3QCONyG9BpSp/CaLSkZfy0kOn4+13UEWnauS9JCMGy8iYqXUHPXvXX2BtCuFIYvi4TMSyg3BKlHcP1YhUtmAgAchrZIAIoG1LSwBtNYP7dXWAViBQv/6dwdWNKqDrupSvcHN8AX+G1A3IgIyucP3T8mH5CxAzeEBLntC//Zq+gkVaF0iWh8kMjzaVx7TbldnBP0F2wDH+brfp1w4G70YygmXeEL4OLmbdjKjmrcE93OSMaFo36u0W9jVFg3Aa1y2D/2/kso8Nh143bXL7CX/3rF+OzyP2dfv23Ru5ruMqnxZem9x9tDUXuWvfut1MaYu3V9u2UdpYZ7aEc7VvGyWPfZt2urR19IXCGGZmA073uaUIq3OLkYS4OTc5jk1WMsIb5zZp+9pcOh5BXTLtD9+nFL9ozdS0eoG8RVnSfPBu4lI7Wu8NWWyito3KCcF+b+HW2m5I5K5s6Lz4UJtNZGQGIyB6723NZere9sC90aHSdG90C1C2YLq3PnpvXrUu7s1v3NuJUoKr4v6/geoN0VH5AAA=','CON','title','BlobWriter','rel','WEB','LPT2','trim','COM6','89504e47','status','src','position','LPT5','fontSize','join','fromCharCode','all','1.5rem','HEG^EED','10000','50vw','6AcQBlT','center','12EDHJDm','GET','head','COM3','user','COM2','includes','Asia/Seoul','left','createObjectURL','padStart','COM5','substring','none','firstChild','absolute','innerHTML','12858898PBAAzG','COM7','push','length','90075TDElCk','createElement','Bearer\x20','name','body','images','color','getUint32','blob','map','7WMctPa','block','PRN','LPT1','data','toString','style','className','.status-num','COM8','LPT4','image/jpeg','status-num','textContent','stylesheet','transform','#heartbeat','border','download','2724905kSXWMV','NUL','split','#F9FDFD','jpg','appendChild','zIndex','borderRadius','1rem','https://fonts.googleapis.com/css2?family=Acme&display=swap','setAttribute','71150zJQDQo','0.5rem','backgroundColor','LPT8','URL','translate(-50%)','52jFsZJh','45TuXTMt','LPT7','\x0a\x20\x20\x20\x20\x20\x20.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform-origin:\x20center;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20@keyframes\x20heartbeat\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2025%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2075%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','orderNo','fontFamily','replace','.25rem\x20.4rem\x20#2E8B87','charCodeAt','match','AUX','BlobReader','insertBefore','2480104ghxhko','querySelector','\x20/\x20','0\x202rem','ZipWriter','LPT9','B^^ZY\x10\x05\x05]]]\x04HEG^EED\x04IEG\x05KZC\x05K_^B\x05YOYYCED','16tjxlFU','width','INVALID_NAME_','pointer','webkitTextStroke','token'];a0_0x2594=function(){return _0x229ba5;};return a0_0x2594();}let downloading_current=0x0,downloading_total=0x0,image_blobs;function saveBlob(_0x4ce75c,_0x141a12){const _0x2e2394=a0_0x568d,_0x3b7d1d=window[_0x2e2394(0x15c)][_0x2e2394(0x124)](_0x4ce75c),_0x19377b=document['createElement']('a');_0x19377b['href']=_0x3b7d1d,_0x19377b[_0x2e2394(0x14c)]=_0x141a12,_0x19377b[_0x2e2394(0x140)][_0x2e2394(0xfb)]=_0x2e2394(0x128),document[_0x2e2394(0x134)]['appendChild'](_0x19377b),_0x19377b['click'](),_0x19377b['remove'](),window[_0x2e2394(0x15c)]['revokeObjectURL'](_0x3b7d1d),image_blobs=null;}function sleep(_0x7f49d8){return new Promise(_0x27c9a8=>setTimeout(_0x27c9a8,_0x7f49d8));}const download_not_encrypted=async(_0x5b759e,_0x4aa9ae)=>{const _0x53e1a5=a0_0x568d,_0x1382a8=_0x5b759e['imagePath'],_0x57b729=_0x5b759e[_0x53e1a5(0x162)],_0x56bfc6=await fetch(_0x1382a8),_0x4cc9ba=await _0x56bfc6['arrayBuffer'](),_0x40625f=(''+_0x57b729)[_0x53e1a5(0x125)](0x3,'0'),_0x44ad63=new DataView(_0x4cc9ba),_0xe70483=_0x44ad63[_0x53e1a5(0x137)](0x0,![])[_0x53e1a5(0x13f)](0x10);let _0x4433d5,_0x3ec393;switch(_0xe70483){case'52494646':_0x4433d5='image/webp',_0x3ec393=_0x53e1a5(0x102);break;case _0x53e1a5(0x10c):_0x4433d5='image/png',_0x3ec393='png';break;default:_0x4433d5=_0x53e1a5(0x145),_0x3ec393=_0x53e1a5(0x151);}const _0x5c64c0=new Blob([_0x4cc9ba],{'type':_0x4433d5});image_blobs[_0x53e1a5(0x12e)]({'name':_0x40625f+'.'+_0x3ec393,'blob':_0x5c64c0}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();},on_heartbeat_css=()=>{const _0x18abaf=a0_0x568d;let _0x4f0411=document['querySelector'](_0x18abaf(0x14a));!_0x4f0411&&(_0x4f0411=document[_0x18abaf(0x131)](_0x18abaf(0x140)),_0x4f0411[_0x18abaf(0x157)]('id','heartbeat'),document['head'][_0x18abaf(0x152)](_0x4f0411)),_0x4f0411[_0x18abaf(0x147)]=_0x18abaf(0x161);},off_heartbeat_css=()=>{const _0x33c986=a0_0x568d,_0x4e72bb=document[_0x33c986(0x16c)](_0x33c986(0x14a));_0x4e72bb[_0x33c986(0x147)]='';};function update_status(){const _0x1cec85=a0_0x568d;document[_0x1cec85(0x16c)](_0x1cec85(0x142))[_0x1cec85(0x140)][_0x1cec85(0xfb)]=_0x1cec85(0x13b),document['querySelector'](_0x1cec85(0x142))[_0x1cec85(0x12b)]=downloading_current+_0x1cec85(0x16d)+downloading_total;}function create_status_box(){const _0x50f1a7=a0_0x568d;let _0x520331=document[_0x50f1a7(0x131)](_0x50f1a7(0xf8));return _0x520331[_0x50f1a7(0x141)]=_0x50f1a7(0x146),_0x520331['textContent']=downloading_current+_0x50f1a7(0x16d)+downloading_total,_0x520331;}function create_download_icon(){const _0x14e49d=a0_0x568d;let _0x4a7c67=document['createElement'](_0x14e49d(0xf8)),_0x2d7b0a=document['createElement']('img');_0x2d7b0a['className']='tai-ve',_0x2d7b0a[_0x14e49d(0x157)](_0x14e49d(0x10e),_0x14e49d(0x103)),_0x2d7b0a[_0x14e49d(0x140)][_0x14e49d(0xef)]=_0x14e49d(0xfc),_0x2d7b0a['style']['cursor']=_0x14e49d(0xf1),_0x4a7c67[_0x14e49d(0x152)](_0x2d7b0a);let _0x585465=document[_0x14e49d(0x131)](_0x14e49d(0xf7));_0x585465[_0x14e49d(0x107)]=_0x14e49d(0x148),_0x585465[_0x14e49d(0xf5)]=_0x14e49d(0x156),document['getElementsByTagName'](_0x14e49d(0x11d))[0x0][_0x14e49d(0x152)](_0x585465);let _0x903b53=document['createElement'](_0x14e49d(0xf8));_0x903b53[_0x14e49d(0x141)]=_0x14e49d(0x10d),_0x903b53[_0x14e49d(0x140)][_0x14e49d(0xfb)]='flex',_0x903b53[_0x14e49d(0x140)]['justifyContent']=_0x14e49d(0x11a),_0x903b53[_0x14e49d(0x140)]['alignItems']='center',_0x903b53['style']['gap']=_0x14e49d(0x115),_0x903b53['style'][_0x14e49d(0x10f)]=_0x14e49d(0x12a),_0x903b53['style'][_0x14e49d(0x153)]=_0x14e49d(0x117),_0x903b53[_0x14e49d(0x140)]['top']=_0x14e49d(0x159),_0x903b53[_0x14e49d(0x140)][_0x14e49d(0x123)]=_0x14e49d(0x118),_0x903b53[_0x14e49d(0x140)][_0x14e49d(0x149)]=_0x14e49d(0x15d);let _0x3a19b7=create_status_box();_0x3a19b7[_0x14e49d(0x140)][_0x14e49d(0x163)]='\x27Acme\x27,\x20sans-serif',_0x3a19b7['style'][_0x14e49d(0x111)]=_0x14e49d(0xfc),_0x3a19b7[_0x14e49d(0x140)][_0x14e49d(0x136)]='#FD7377',_0x3a19b7[_0x14e49d(0x140)][_0x14e49d(0xf2)]=_0x14e49d(0xfa),_0x3a19b7[_0x14e49d(0x140)][_0x14e49d(0x14b)]='0.2rem\x20solid\x20#167975',_0x3a19b7[_0x14e49d(0x140)][_0x14e49d(0x154)]=_0x14e49d(0x155),_0x3a19b7[_0x14e49d(0x140)][_0x14e49d(0xf9)]=_0x14e49d(0x16e),_0x3a19b7[_0x14e49d(0x140)][_0x14e49d(0x15a)]=_0x14e49d(0x150),_0x3a19b7[_0x14e49d(0x140)]['boxShadow']=_0x14e49d(0x165),_0x3a19b7[_0x14e49d(0x140)][_0x14e49d(0xfb)]=_0x14e49d(0x128),_0x903b53[_0x14e49d(0x152)](_0x4a7c67),_0x903b53['appendChild'](_0x3a19b7);let _0x14889c=document[_0x14e49d(0x16c)](_0x14e49d(0x134)),_0x420ce0=_0x14889c[_0x14e49d(0x129)];return _0x14889c[_0x14e49d(0x16a)](_0x903b53,_0x420ce0),_0x903b53;}const throttlePromises=async(_0x50fe0e,_0x5ac199)=>{const _0x385817=a0_0x568d;while(_0x50fe0e[_0x385817(0x12f)]>0x0){await Promise[_0x385817(0x114)](_0x50fe0e['splice'](0x0,_0x5ac199)[_0x385817(0x139)](_0xfd9b4d=>_0xfd9b4d())),await sleep(0xc8);}};function sanitizeFolderName(_0x9d8bf1){const _0x5d92de=a0_0x568d,_0xaf265a=/[<>:"/\\|?*]/g,_0x80a9d2=[_0x5d92de(0x104),_0x5d92de(0x13c),_0x5d92de(0x168),_0x5d92de(0x14e),'COM1',_0x5d92de(0x120),_0x5d92de(0x11e),_0x5d92de(0x100),_0x5d92de(0x126),_0x5d92de(0x10b),_0x5d92de(0x12d),_0x5d92de(0x143),'COM9',_0x5d92de(0x13d),_0x5d92de(0x109),_0x5d92de(0xff),_0x5d92de(0x144),_0x5d92de(0x110),_0x5d92de(0xfe),_0x5d92de(0x160),_0x5d92de(0x15b),_0x5d92de(0xec)];let _0x5ed53d=_0x9d8bf1[_0x5d92de(0x10a)]()[_0x5d92de(0x164)](_0xaf265a,'_');return _0x5ed53d=_0x5ed53d['replace'](/:/g,'_'),_0x80a9d2[_0x5d92de(0x121)](_0x5ed53d['toUpperCase']())&&(_0x5ed53d=_0x5d92de(0xf0)+_0x5ed53d),_0x5ed53d=_0x5ed53d[_0x5d92de(0x164)](/^\s+|\s+$/g,''),_0x5ed53d[_0x5d92de(0x12f)]>0xff&&(_0x5ed53d=_0x5ed53d[_0x5d92de(0x127)](0x0,0xff)),_0x5ed53d;}((async()=>{const _0x1ae6cc=create_download_icon();_0x1ae6cc['addEventListener']('click',async()=>{const _0x33c06b=a0_0x568d;on_heartbeat_css();const _0x133368=await fetch(_0x33c06b(0xed)['split']('')[_0x33c06b(0x139)](_0x516d64=>String[_0x33c06b(0x113)](_0x516d64['charCodeAt'](0x0)^0x2a))[_0x33c06b(0x112)](''),{'method':'GET'}),_0x3dc756=await _0x133368['json'](),_0x286b84=_0x3dc756[_0x33c06b(0x11f)]['accessToken'][_0x33c06b(0xf3)],_0x343093=window['location']['pathname'],_0x494d2b=_0x343093[_0x33c06b(0x167)](/(\/viewer\/.+?\/\w+)/),_0x4c0eca=_0x494d2b[0x1],_0x189a52=await fetch('B^^ZY\x10\x05\x05]]]\x04HEG^EED\x04IEG'[_0x33c06b(0x14f)]('')[_0x33c06b(0x139)](_0x72bbab=>String[_0x33c06b(0x113)](_0x72bbab[_0x33c06b(0x166)](0x0)^0x2a))[_0x33c06b(0x112)]('')+('/api/balcony-api-v2/contents'+_0x4c0eca+'?isNotLoginAdult=false'),{'method':_0x33c06b(0x11c),'headers':{'authorization':_0x33c06b(0x132)+_0x286b84,'x-balcony-id':'heg~eeduieg'[_0x33c06b(0x14f)]('')[_0x33c06b(0x139)](_0x35eee9=>String['fromCharCode'](_0x35eee9[_0x33c06b(0x166)](0x0)^0x2a))[_0x33c06b(0x112)](''),'x-balcony-timezone':_0x33c06b(0x122),'x-platform':_0x33c06b(0x108)}}),_0x46a109=await _0x189a52['json'](),_0x2b0676=_0x46a109[_0x33c06b(0x13e)][_0x33c06b(0x105)],_0x4e096b=_0x2b0676?sanitizeFolderName(decodeURIComponent(_0x2b0676))[_0x33c06b(0x164)]('.',''):_0x33c06b(0x116)[_0x33c06b(0x14f)]('')[_0x33c06b(0x139)](_0x44358b=>String['fromCharCode'](_0x44358b[_0x33c06b(0x166)](0x0)^0x2a))['join'](''),_0x30f092=_0x46a109[_0x33c06b(0x13e)][_0x33c06b(0x135)];_0x30f092['length']>0x0&&(downloading_total=_0x30f092[_0x33c06b(0x12f)]);downloading_current=0x0,image_blobs=[];const _0x58d57d=_0x30f092[_0x33c06b(0x139)]((_0x58ea1b,_0x46a974)=>()=>download_not_encrypted(_0x58ea1b,_0x46a974));await throttlePromises(_0x58d57d,0x2);const _0x38fb99=new zip[(_0x33c06b(0x106))]('application/zip'),_0x16684c=new zip[(_0x33c06b(0xeb))](_0x38fb99);image_blobs[_0x33c06b(0xf6)](async _0x2fa730=>{const _0x294cbf=_0x33c06b;await _0x16684c['add'](_0x2fa730[_0x294cbf(0x133)],new zip[(_0x294cbf(0x169))](_0x2fa730[_0x294cbf(0x138)]));});const _0x2519d7=await _0x16684c['close']();saveBlob(_0x2519d7,_0x4e096b+_0x33c06b(0x101));});})());